<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>singleUpdate</title>
<link href="../../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../../";</script>    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="../../../../scripts/sourceset_dependencies.js" async></script>
<link href="../../../../styles/style.css" rel="Stylesheet">
<link href="../../../../styles/jetbrains-mono.css" rel="Stylesheet">
<link href="../../../../styles/main.css" rel="Stylesheet">
<link href="../../../../styles/prism.css" rel="Stylesheet">
<link href="../../../../styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="../../../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
<a href="../../../../index.html">
<span>river</span>            </a>    </div>
    <div>
    </div>
    <div class="pull-right d-flex">
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main">jvm</button>
        </div>
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" data-page-type="member" id="content" pageids="connector-rdbms-r2dbc::com.river.connector.rdbms.r2dbc//singleUpdate/io.r2dbc.spi.Connection#kotlin.String/PointingToDeclaration//-1239231779">
  <div class="breadcrumbs"><a href="../index.html">connector-rdbms-r2dbc</a><span class="delimiter">/</span><a href="index.html">com.river.connector.rdbms.r2dbc</a><span class="delimiter">/</span><span class="current">singleUpdate</span></div>
  <div class="cover ">
    <h1 class="cover"><span>single</span><wbr><span><span>Update</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main"><div class="symbol monospace"><span class="token keyword"></span><span class="token keyword">fun </span><span data-unresolved-link="io.r2dbc.spi/Connection///PointingToDeclaration/">Connection</span><span class="token punctuation">.</span><a href="single-update.html"><span class="token function">singleUpdate</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">sql<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a></span></span><span class="token punctuation">)</span><span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html">Long</a><span class="token operator">&gt;</span></div><p class="paragraph">Executes a single SQL update statement and returns the number of rows affected as a Flow<long>.</long></p><span class="kdoc-tag"><h4 class="">Return</h4><p class="paragraph">a Flow<long> that emits the number of rows affected by the SQL statement</long></p><p class="paragraph">Example usage:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val connection: Connection = // Obtain a connection from your R2DBC connection factory<br> val updateSql = "UPDATE users SET email='newemail@example.com' WHERE id=1"<br> val numAffectedRows = connection.singleUpdate(updateSql).single()<br> println("Updated $numAffectedRows rows")</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></span><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main" data-filterable-set=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>sql</span></span></u></div></span></div><div><div class="title"><p class="paragraph">the SQL statement to execute</p></div></div></div></div></div><hr><div class="symbol monospace"><span class="token keyword"></span><span class="token keyword">fun </span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="single-update.html">T</a><span class="token operator">&gt; </span><span data-unresolved-link="io.r2dbc.spi/Connection///PointingToDeclaration/">Connection</span><span class="token punctuation">.</span><a href="single-update.html"><span class="token function">singleUpdate</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">sql<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a><span class="token punctuation">, </span></span><span class="parameter ">upstream<span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="single-update.html">T</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">concurrency<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html">Int</a><span class="token operator"> = </span><span class="token constant">1</span><span class="token punctuation">, </span></span><span class="parameter ">prepare<span class="token operator">: </span><span class="token keyword"></span><span data-unresolved-link="io.r2dbc.spi/Statement///PointingToDeclaration/">Statement</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword"></span><a href="single-update.html">T</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}</span></span><span class="token punctuation">)</span><span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html">Long</a><span class="token operator">&gt;</span></div><p class="paragraph">Executes an SQL update statement for each item in the provided upstream Flow.</p><span class="kdoc-tag"><h4 class="">Return</h4><p class="paragraph">A Flow of Long values representing the number of rows updated for each executed statement.</p><p class="paragraph">Example usage:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val connection: Connection = // Obtain a connection from your R2DBC connection factory<br>val sql = "UPDATE users SET name = ? WHERE id = ?"<br>val users = flowOf(1 to "Alice", 2 to "Bob")<br><br>connection<br>    .singleUpdate(sql, users) { (id, name) -&gt;<br>        bind(0, name)<br>        bind(1, id)<br>    }<br>    .collect { rowsUpdated -&gt;<br>        println("Rows updated: $rowsUpdated")<br>    }</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></span><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main" data-filterable-set=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>T</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The type of the items emitted by the upstream Flow.</p></div></div></div></div><div class="table-row" data-filterable-current=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main" data-filterable-set=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>sql</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The SQL update statement to be executed.</p></div></div></div></div><div class="table-row" data-filterable-current=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main" data-filterable-set=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>upstream</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A Flow of items to be processed, where each item will be used to prepare an SQL statement.</p></div></div></div></div><div class="table-row" data-filterable-current=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main" data-filterable-set=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>concurrency</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional parameter to define the level of concurrency when processing items. Defaults to 1.</p></div></div></div></div><div class="table-row" data-filterable-current=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main" data-filterable-set=":connector:connector-rdbms:connector-rdbms-r2dbc:dokkaHtmlPartial/main"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>prepare</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional lambda for preparing the statement with an item from the upstream Flow, which allows you to configure the statement further before executing it (e.g., bind parameters). Defaults to an empty lambda.</p></div></div></div></div></div></div></div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2023 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>
</body>
</html>

